<h1>Chessboard</h1>

<table id='chessboard'>
  <% (0..7).each do |y| %>
    <tr>
    <% (0..7).each do |x| %>
      <td class="droppable" data-x="<%= x %>" data-y="<%= y %>">
      <% piece = Piece.find_by(x_position: x, y_position: y, game_id: @game.id) %>
      	<% if piece.present? %>
      		<div class="piece draggable" data-black="<%= !piece.is_black %>" data-id="<%= piece.id %>"><%= piece.unicode.html_safe %></div>
        <% end %>
      </td>
    <% end %>
  <% end %>
</table>

<script type="text/javascript">
  $(document).ready(function () {
    $(".draggable").draggable({
      helper: "clone",
    });
    $(".droppable").droppable({
      drop: function( event, ui) {
        $(this).append(ui.draggable);
      }
    })
  } );
</script>
